{"ast":null,"code":"import{useEffect,useState}from'react';import axios from'axios';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faCalendarAlt,faChair,faTrash}from'@fortawesome/free-solid-svg-icons';import'./History.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BookingHistory=()=>{const[bookings,setBookings]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const fetchBookingHistory=async()=>{try{const token=localStorage.getItem('token');const response=await axios.get('hhttps://newslt-mern.azurewebsites.net/api/seats/history',{headers:{Authorization:`Bearer ${token}`}});setBookings(response.data);setError('');}catch(error){setError('Unable to fetch booking history. Please try again later.');}finally{setLoading(false);}};fetchBookingHistory();},[]);const handleDelete=async id=>{const confirmed=window.confirm('Are you sure you want to delete this booking?');if(confirmed){try{const token=localStorage.getItem('token');await axios.delete(`https://newslt-mern.azurewebsites.net/api/seats/history/${id}`,{headers:{Authorization:`Bearer ${token}`}});// Filter out the deleted booking from state\nsetBookings(bookings.filter(booking=>booking._id!==id));}catch(error){setError('Error deleting booking. Please try again.');}}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center h-screen\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 ml-3\",children:\"Loading your booking history...\"})]});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"font-bold\",children:\"Error: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"block sm:inline\",children:error})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"mt-20 p-5 max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-center text-gray-800 mb-10\",children:\"Your Booking History\"}),bookings.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-lg\",children:\"You have no bookings yet.\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-6\",children:bookings.map(booking=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 border rounded-lg shadow-lg bg-white hover:shadow-2xl transition-shadow duration-300 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-800 mb-2\",children:booking.event?booking.event.name:'Event Name Unavailable'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 flex items-center mb-1\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCalendarAlt,className:\"mr-2 text-blue-500\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Date: \"}),\" \",booking.event?new Date(booking.event.date).toLocaleDateString():'N/A']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 flex items-center\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faChair,className:\"mr-2 text-green-500\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Seat: \"}),\" \",booking.seatNumber]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition-transform transform hover:scale-105 flex items-center\",onClick:()=>handleDelete(booking._id),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTrash,className:\"mr-2\"}),\"Delete\"]})]},booking._id))})]});};export default BookingHistory;","map":{"version":3,"names":["useEffect","useState","axios","FontAwesomeIcon","faCalendarAlt","faChair","faTrash","jsx","_jsx","jsxs","_jsxs","BookingHistory","bookings","setBookings","loading","setLoading","error","setError","fetchBookingHistory","token","localStorage","getItem","response","get","headers","Authorization","data","handleDelete","id","confirmed","window","confirm","delete","filter","booking","_id","className","children","role","length","map","event","name","icon","Date","date","toLocaleDateString","seatNumber","onClick"],"sources":["C:/Users/ASUS/Downloads/my-redux-app-backend-main-main/frontend/src/Pages/History/BookingHistory.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCalendarAlt, faChair, faTrash } from '@fortawesome/free-solid-svg-icons';\nimport './History.css'\n\nconst BookingHistory = () => {\n  const [bookings, setBookings] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchBookingHistory = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await axios.get('hhttps://newslt-mern.azurewebsites.net/api/seats/history', {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        setBookings(response.data);\n        setError('');\n      } catch (error) {\n        setError('Unable to fetch booking history. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchBookingHistory();\n  }, []);\n\n  const handleDelete = async (id) => {\n    const confirmed = window.confirm('Are you sure you want to delete this booking?');\n    if (confirmed) {\n      try {\n        const token = localStorage.getItem('token');\n        await axios.delete(`https://newslt-mern.azurewebsites.net/api/seats/history/${id}`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        // Filter out the deleted booking from state\n        setBookings(bookings.filter((booking) => booking._id !== id));\n      } catch (error) {\n        setError('Error deleting booking. Please try again.');\n      }\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <div className=\"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12 mb-4\"></div>\n        <p className=\"text-gray-600 ml-3\">Loading your booking history...</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n          <strong className=\"font-bold\">Error: </strong>\n          <span className=\"block sm:inline\">{error}</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"mt-20 p-5 max-w-4xl mx-auto\">\n      <h2 className=\"text-3xl font-bold text-center text-gray-800 mb-10\">Your Booking History</h2>\n      {bookings.length === 0 ? (\n        <div className=\"text-center\">\n          <p className=\"text-gray-600 text-lg\">You have no bookings yet.</p>\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 gap-6\">\n          {bookings.map((booking) => (\n  <div\n    key={booking._id}\n    className=\"p-6 border rounded-lg shadow-lg bg-white hover:shadow-2xl transition-shadow duration-300 flex justify-between items-center\"\n  >\n    <div>\n      <h3 className=\"text-xl font-semibold text-gray-800 mb-2\">\n        {booking.event ? booking.event.name : 'Event Name Unavailable'}\n      </h3>\n      <p className=\"text-gray-600 flex items-center mb-1\">\n        <FontAwesomeIcon icon={faCalendarAlt} className=\"mr-2 text-blue-500\" />\n        <strong>Date: </strong> {booking.event ? new Date(booking.event.date).toLocaleDateString() : 'N/A'}\n      </p>\n      <p className=\"text-gray-600 flex items-center\">\n        <FontAwesomeIcon icon={faChair} className=\"mr-2 text-green-500\" />\n        <strong>Seat: </strong> {booking.seatNumber}\n      </p>\n    </div>\n    <button\n      className=\"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition-transform transform hover:scale-105 flex items-center\"\n      onClick={() => handleDelete(booking._id)}\n    >\n      <FontAwesomeIcon icon={faTrash} className=\"mr-2\" />\n      Delete\n    </button>\n  </div>\n))}\n\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default BookingHistory;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}